* TCP/IP分为4个层

|名称|代表|
|:---:|:----:|
|应用层| HTTP|
|传输层|TCP|
|网络层|IP|
|链路层| |

* HTTP协议

    * 生成请求提交(客户端)
    * 处理请求(服务端)
  
* DNS协议
    * 根据域名查找IP
      
* TCP协议
    * 分割数据
    * 确保传输成功(客户端)
    
        `使用3次握手`
        
    * 确保接受成功(服务端)
    * 合并数据
    
* IP协议
    
    中转+传送
    
    * IP地址
    * Mac地址
    * ARP(通过IP地址反查Mac地址)

* URI：资源的标识(http,ft,file...)
* URL：资源地址(http)

--------

Http请求方法：
* GET：获取资源
* POST：传输实体主体
* PUT：传输文件(无验证机制)
* HEAD：获得报文首部
* DELETE：删除文件
* OPTIONS：询问支持的方法
* TRACE：追踪路径
* CONNECT：要求用隧道协议连接代理

--------

> 单次连接：每个请求一次连接

> 持久连接：多个请求一次连接
> > 管线化：多个内容一次请求

-----------

状态码：

* 206：部分请求，搭配`Content-Range`使用

* 302：临时重定向，规则上定义不能改变`method`

* 303：临时重定向，规则上定义重定向使用`GET`

* 304：允许访问资源，但不符合条件

    例如`If-Modified-Since`，服务端发现请求提供的`最后修改日期`和服务端的`最后修改日期`一致，则返回304.
    
* 307：与302的区别在于，确保请求方法和消息主体不会发生变化

--------

代理、网关、隧道

* 代理：处理双边的信息交互，每次通过代理服务器转发请求或响应时，会追加写入 Via 首部信息

* 网关：网关的工作机制和代理十分相似。而网关能使通信线路上的服务器提供`非 HTTP 协议`服务。

* 隧道：隧道可按要求建立起一条与其他服务器的通信线路，届时使用 SSL 等加密手段进行通信。

-----

HTTP 通用首部字段

* Cache-Control

1. 缓存请求指令

    |指令 |参数 |说明|
    |---|---|---|
    |**no-cache** |无 |不使用缓存的内容，强制向源服务器再次验证|
    |**no-store** |无 |  不缓存请求或响应的任何内容|
    |max-age = [ 秒] |必需 |   响应的最大Age值|
    |max-stale( = [ 秒]) |可省略 |  接收已过期的响应|
    |min-fresh = [ 秒] |必需 | 期望在指定时间内的响应仍有效|
    |no-transform |无 |  代理不可更改媒体类型|
    |only-if-cached |无 |从缓存获取资源|
    |cache-extension |- |新指令标记（token）|
    
2. 缓存响应指令

    |指令| 参数 |说明|
    |---|---|---|
    |public |无 |可向任意方提供响应的缓存|
    |private |可省略 |仅向特定用户返回响应|
    |no-cache |可省略 |允许缓存，缓存前必须先确认其有效性|
    |no-store |无 |不缓存请求或响应的任何内容|
    |no-transform |无 |代理不可更改媒体类型|
    |must-revalidate| 无 |必须再向源服务器进行确认当前缓存是否有效，再确定是否使用|
    |proxy-revalidate |无 |要求中间缓存服务器对缓存的响应有效性再进行确认|
    |max-age = [ 秒] |必需 |响应的最大Age值，1.1`max-age`优先，1.0`Expires`优先|
    |s-maxage = [ 秒] |必需 |公共缓存服务器响应的最大Age值|
    |cache-extension |- |新指令标记（token）|
    
* Transfer-Encoding

    规定了传输报文主体时采用的编码方式
    
-------

HTTP 请求首部字段

* Accept：允许接受的格式

    可使用`q=`定义权重(范围0~1，3位小数)，默认1.0。
    
    首先返回权重值最高的媒体类型

* Accept-Encoding：支持的内容编码

    * gzip
    * compress
    * deflate
    * identity：不执行压缩或不会变化的默认编码格式
    
* Expect：告知服务器，期望出现的某种特定行为，1.1只定义了`100-continue`

* If-Modified-Since：请求字段的日期后如果有更新，执行请求，否则返回状态码 304 Not Modified 的响应

* If-Match和If-Range(搭配字段Range)：

    如果`If-Match`对应的`ETag`不符合，返回状态码`412 Precondition Failed`，需要再次请求
    
    如果`If-Range`对应的`Etag`不符合，会返回所有内容`200`，否则返回`Range`请求的部分内容`206`
    
* Max-Forwards：定义最多转发的次数

 